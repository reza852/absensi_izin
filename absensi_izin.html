<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Absensi Izin Siswa SEMALA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <script src="script.js" defer></script>
  <style>
    body { background-color: #f8f9fa; }
    #loginSection, #absensiSection { display: none; }
    .jam { font-weight: bold; color: #0d6efd; font-size: 1.1em; }
  </style>
</head>
<body>

<div class="container text-center mt-4">
  <img src="https://i.ibb.co/nmfHQpw/logo-sman5.png" width="120" class="mb-2">
  <h2 class="fw-bold">ABSENSI IZIN SISWA SISWI SEMALA</h2>
  <p id="tanggalHariIni" class="text-muted"></p>
  <p id="jamSekarang" class="jam"></p>
</div>

<!-- LOGIN -->
<div id="loginSection" class="container mt-5 text-center">
  <div class="card p-4 shadow mx-auto" style="max-width: 400px;">
    <h5 class="mb-3">Login Guru/Admin</h5>
    <input type="password" id="passwordAdmin" class="form-control mb-3" placeholder="Masukkan password">
    <button class="btn btn-primary" onclick="loginAdmin()">Masuk</button>
  </div>
</div>

<!-- ABSENSI -->
<div id="absensiSection" class="container mt-4">
  <div class="card p-3 shadow">
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Nama Siswa</label>
        <input type="text" id="nama" class="form-control" placeholder="Masukkan Nama Siswa" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Kelas</label>
        <select id="kelas" class="form-select"></select>
      </div>
      <div class="col-md-4">
        <label class="form-label">NIS</label>
        <input type="text" id="nis" class="form-control" placeholder="Masukkan NIS">
      </div>
      <div class="col-md-4">
        <label class="form-label">Status Kehadiran</label>
        <select id="status" class="form-select">
          <option value="Izin Sakit">Izin Sakit</option>
          <option value="Izin Acara">Izin Acara</option>
        </select>
      </div>
      <div class="col-md-8">
        <label class="form-label">Keterangan</label>
        <input type="text" id="keterangan" class="form-control" placeholder="Tambahkan keterangan">
      </div>
      <div class="col-md-12">
        <label class="form-label">Lampiran Foto (Wali & Siswa)</label>
        <input type="file" id="foto" class="form-control" accept="image/*">
      </div>
    </div>
    <button class="btn btn-primary mt-3" onclick="tambahData()">Simpan Data</button>
  </div>

  <!-- QR CODE SCANNER -->
  <div class="card p-3 mt-4 shadow">
    <h5>ðŸ“· Scan Barcode Siswa</h5>
    <div id="reader" style="width:300px;"></div>
  </div>

  <!-- DATA -->
  <div class="card p-3 mt-4 shadow">
    <h5 class="mb-3">ðŸ“‘ Daftar Absensi</h5>
    <div class="row mb-3">
      <div class="col-md-6">
        <select id="filterKelas" class="form-select" onchange="tampilkanData()">
          <option value="Semua">Semua</option>
        </select>
      </div>
      <div class="col-md-6 text-end">
        <button class="btn btn-success" onclick="downloadExcel()">â¬‡ Download Excel</button>
      </div>
    </div>
    <table class="table table-bordered text-center align-middle" id="tabelAbsensi">
      <thead class="table-dark">
        <tr>
          <th>Nama</th>
          <th>Kelas</th>
          <th>NIS</th>
          <th>Status</th>
          <th>Keterangan</th>
          <th>Jam</th>
          <th>Foto</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
document.getElementById("loginSection").style.display = "block";
</script>

</body>
</html>
